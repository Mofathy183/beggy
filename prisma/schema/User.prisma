//** initialize the relationships in all the models with User

model User {
    id               String    @id @default(uuid())
    firstName        String    @map("first_name")
    lastName         String    @map("last_name")
    password         String
    email            String    @unique
    role             Role      @default(USER)
    profilePicture   String?
    gender           Gender?
    birth            DateTime?
    country          String?
    city             String?
    isActive         Boolean   @default(true) @map("is_active")
    isEmailVerified  Boolean   @default(false) @map("is_email_verified")
    passwordChangeAt DateTime? @map("password_change_at")
    createdAt        DateTime  @default(now()) @map("created_at")
    updatedAt        DateTime  @updatedAt @map("updated_at")

    //* the relationships
    userToken UserToken[]
    account   Account[]
    bags      Bags[]
    suitcases Suitcases[]
    items     Items[]

    //* the nama of the table
    @@map("users")
}

model UserToken {
    id        String    @id @default(uuid())
    type      TokenType
    hashToken String    @unique
    expiresAt DateTime
    createdAt DateTime  @default(now()) @map("created_at")

    userId String
    user   User   @relation(fields: [userId], references: [id])

    @@map("user_tokens")
}

model Permission {
    id      String   @id @default(uuid())
    action  String
    subject String[]

    rolePermissions RoleOnPermission[]

    @@unique([action, subject])
    @@map("permissions")
}

model RoleOnPermission {
    id           String     @id @default(uuid())
    role         Role
    permission   Permission @relation(fields: [permissionId], references: [id])
    permissionId String

    @@map("role_on_permission")
}
